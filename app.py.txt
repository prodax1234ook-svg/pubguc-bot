from flask import Flask, request
import requests
import webbrowser
import threading

# ------ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø¨Ø§Øª ------
BOT_TOKEN = "ØªÙˆÚ©Ù†_Ø±Ø¨Ø§Øª_ØªÙ„Ú¯Ø±Ø§Ù…"
CHAT_ID = "Ø¢ÛŒØ¯ÛŒ_Ú†Øª_ÛŒØ§_Ú¯Ø±ÙˆÙ‡"
# -------------------------

app = Flask(__name__)

@app.route("/")
def home():
    return """
    <html lang="fa" dir="rtl">
    <head>
        <meta charset="utf-8">
        <title>Ø®Ø±ÛŒØ¯ UC PUBG</title>
    </head>
    <body style="font-family:tahoma;background:#111;color:#fff;text-align:center;padding-top:50px;">
        <h1>Ø®Ø±ÛŒØ¯ UC PUBG</h1>
        <form action="/order" method="post" style="display:grid;gap:8px;max-width:300px;margin:auto;">
            <input name="pubgId" placeholder="PUBG ID" required>
            <input name="ucAmount" placeholder="ØªØ¹Ø¯Ø§Ø¯ UC" required>
            <input name="contact" placeholder="Ø±Ø§Ù‡ Ø§Ø±ØªØ¨Ø§Ø·">
            <button type="submit">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
        </form>
    </body>
    </html>
    """

@app.route("/order", methods=["POST"])
def order():
    pubgId = request.form.get("pubgId")
    ucAmount = request.form.get("ucAmount")
    contact = request.form.get("contact", "-")

    text = f"Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ ğŸ®\nPUBG ID: {pubgId}\nUC: {ucAmount}\nØ§Ø±ØªØ¨Ø§Ø·: {contact}"

    url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
    requests.post(url, json={"chat_id": CHAT_ID, "text": text})

    return "<h2 style='text-align:center;color:lime;'>âœ… Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯</h2>"

def open_browser():
    webbrowser.open_new("http://127.0.0.1:5000")

if __name__ == "__main__":
    threading.Timer(1, open_browser).start()
    app.run()
